# ë³µìŠ¬í€€íŠ¸

## í”„ë¡œì íŠ¸ ê°œìš”
- **í”„ë¡œì íŠ¸ëª…**: ë³µìŠ¬í€€íŠ¸
- **ëª©ì **: ë‹¤ì–‘í•œ í€€íŠ¸ íˆ¬ì ì „ëµì˜ ì„±ê³¼ë¥¼ ë¶„ì„í•˜ê³  ë¹„êµí•˜ëŠ” Python ê¸°ë°˜ ë°±í…ŒìŠ¤íŒ… ì‹œìŠ¤í…œ
- **ì£¼ìš” ê¸°ëŠ¥**: ì¼ì‹œíˆ¬ì vs ì ë¦½ì‹íˆ¬ì, ëª¨ë©˜í…€ íˆ¬ì, ë³€ë™ì„± ëŒíŒŒ ì „ëµ ë¶„ì„ ë“±

## ëª…ë ¹ì–´
```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# ì¼ì‹œíˆ¬ì vs ì ë¦½íˆ¬ì ë°±í…ŒìŠ¤íŒ… ì‹¤í–‰ (í…ŒìŠ¤íŠ¸ ì½”ë“œ ë°©ì‹)
cd backtests/lump_sum_vs_dca
# 1. run_backtest.pyì—ì„œ BACKTEST_CONFIG ë³€ìˆ˜ ìˆ˜ì •
# 2. ì‹¤í–‰
python run_backtest.py

# ê¸°ì¡´ ë°©ì‹ (ì¤‘ì•™ ì§‘ì¤‘ì‹)
python test_sample.py
```


## ê°œë°œ ë…¸íŠ¸
- **ì¼ì‹œíˆ¬ì vs ì ë¦½íˆ¬ì ë°±í…ŒìŠ¤íŒ…**: `backtests/lump_sum_vs_dca/` - âœ… ì™„ì„±
- **ìƒˆë¡œìš´ ë°±í…ŒìŠ¤íŒ… êµ¬ì¡°**: ê° ë°±í…ŒìŠ¤íŒ…ë³„ ë…ë¦½ ëª¨ë“ˆë¡œ êµ¬ì„±
- **ê³µí†µ ëª¨ë“ˆ**: `src/` - ë² ì´ìŠ¤ í´ë˜ìŠ¤ ë° ê³µí†µ ìœ í‹¸ë¦¬í‹°
- **í–¥í›„ ë°±í…ŒìŠ¤íŒ…**: ëª¨ë©˜í…€ ì „ëµ, ë³€ë™ì„± ëŒíŒŒ, ì„¹í„° ë¡œí…Œì´ì…˜ ë“± ê³„íšë¨

## ê°œë°œ í‘œì¤€ ë° ê°€ì´ë“œë¼ì¸

### ğŸ“Š Excel íŒŒì¼ ìƒì„± í‘œì¤€
Excel íŒŒì¼ì„ ìƒì„±í•  ë•Œ ë°˜ë“œì‹œ ë‹¤ìŒ ê¸°ì¤€ì„ ì ìš©í•˜ì„¸ìš”:

#### 1. ì…€ ì„œì‹ ì„¤ì •
```python
# ì»¬ëŸ¼ë³„ ë°ì´í„° íƒ€ì…ì— ë§ëŠ” ì„œì‹ ì ìš©
- ë‚ ì§œ: "YYYY-MM-DD" í˜•ì‹, ê°€ìš´ë° ì •ë ¬
- ê²½ê³¼ì›”ìˆ˜: ì •ìˆ˜ í˜•ì‹, ê°€ìš´ë° ì •ë ¬  
- ê°€ê²©/ê°€ì¹˜/ê¸ˆì•¡: FORMAT_NUMBER_COMMA_SEPARATED1, ì˜¤ë¥¸ìª½ ì •ë ¬
- ìˆ˜ìµë¥ /MDD: FORMAT_PERCENTAGE_00 (ë°ì´í„°ëŠ” 100ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì €ì¥), ì˜¤ë¥¸ìª½ ì •ë ¬
- ìˆ˜ëŸ‰/í‰ê· ë‹¨ê°€: "#,##0.00" í˜•ì‹, ì˜¤ë¥¸ìª½ ì •ë ¬
- ì¼ë°˜ ìˆ«ì: ì •ê·œì‹ r'^-?\d+\.?\d*$'ë¡œ ê°ì§€, ì˜¤ë¥¸ìª½ ì •ë ¬
- ëª¨ë“  ìˆ«ì ë°ì´í„°: í—¤ë”ë¥¼ ì œì™¸í•œ ëª¨ë“  ìˆ«ì ë°ì´í„°ëŠ” ì˜¤ë¥¸ìª½ ì •ë ¬ í•„ìˆ˜
```

#### 2. ë¨¸ë¦¬í–‰ ê³ ì •
```python
# ëª¨ë“  ë°ì´í„° ì‹œíŠ¸ì— ë¨¸ë¦¬í–‰ ê³ ì • ì ìš©
ws.freeze_panes = 'A2'
```

#### 3. ì—´ ë„ˆë¹„ ìµœì í™”
```python
# ë°ì´í„° ë‚´ìš©ì— ë§ëŠ” ì ì ˆí•œ ì—´ ë„ˆë¹„ ì„¤ì •
# ê¸¸ì´ê°€ ê¸´ ì»¬ëŸ¼ì€ 18, ì§§ì€ ì»¬ëŸ¼ì€ 8-12ë¡œ ì¡°ì •
```

#### 4. Excel ìˆ˜ì‹ ì˜¤ë¥˜ ë°©ì§€
```python
# Excelì—ì„œ '='ë¡œ ì‹œì‘í•˜ëŠ” ë¬¸ìì—´ì€ ìˆ˜ì‹ìœ¼ë¡œ ì¸ì‹ë˜ì–´ ì˜¤ë¥˜ ë°œìƒ
# ì œëª©ì´ë‚˜ ì„¹ì…˜ êµ¬ë¶„ìì— '='ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜
# ì˜ëª»ëœ ì˜ˆ: '=== íˆ¬ì ì„¤ì • ì •ë³´ ===' 
# ì˜¬ë°”ë¥¸ ì˜ˆ: '[ íˆ¬ì ì„¤ì • ì •ë³´ ]', 'â–¶ íˆ¬ì ì„¤ì • ì •ë³´', 'íˆ¬ì ì„¤ì • ì •ë³´'
```

#### 5. í†µí™” ë‹¨ìœ„ ì‚¬ìš© ê¸ˆì§€
```python
# íŠ¹ë³„í•œ ì¡°ê±´ì´ ì—†ëŠ” í•œ í†µí™” ë‹¨ìœ„('ì›', '$', 'â‚©' ë“±)ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
# ì°¨íŠ¸ ë ˆì´ë¸”, í…ìŠ¤íŠ¸ ë°•ìŠ¤, Yì¶• í¬ë§·ì—ì„œ í†µí™” ë‹¨ìœ„ ì œê±°
# ì˜ëª»ëœ ì˜ˆ: 'í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜ (ì›)', '10,000ì›', '1.2ì²œë§Œì›'
# ì˜¬ë°”ë¥¸ ì˜ˆ: 'í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜', '10,000', '1.2ì²œë§Œ'
```

### ğŸ“ˆ ì°¨íŠ¸ ìƒì„± í‘œì¤€
ì°¨íŠ¸ë¥¼ ìƒì„±í•  ë•Œ ë°˜ë“œì‹œ ë‹¤ìŒ ê¸°ì¤€ì„ ì ìš©í•˜ì„¸ìš”:

#### 0. ìˆ«ì ìŠ¤ì¼€ì¼ í‘œì¤€ (3ìë¦¬ ë‹¨ìœ„ êµ¬ë¶„)
```python
# Yì¶• ëˆˆê¸ˆê°’ì„ 3ìë¦¬ë§ˆë‹¤ ë‹¨ìœ„ë¡œ êµ¬ë¶„í•˜ì—¬ ê°€ë…ì„± í–¥ìƒ
def format_value(x, _):
    if abs(x) >= 1e8:      # ì–µ ì´ìƒ: 12ì–µ, 34ì–µ
        return f'{x/1e8:.0f}ì–µ'
    elif abs(x) >= 1e4:    # ë§Œ ì´ìƒ: 56ë§Œ, 78ë§Œ
        return f'{x/1e4:.0f}ë§Œ'
    elif abs(x) >= 1e3:    # ì²œ ì´ìƒ: 123ì²œ, 456ì²œ
        return f'{x/1e3:.0f}ì²œ'
    else:                  # ì²œ ë¯¸ë§Œ: 789
        return f'{x:.0f}'

ax.yaxis.set_major_formatter(plt.FuncFormatter(format_value))
```

#### 1. í•œê¸€ í°íŠ¸ ì„¤ì • (í•„ìˆ˜)
```python
import matplotlib.font_manager as fm

# í°íŠ¸ ìºì‹œ í´ë¦¬ì–´ ë° ì‹œìŠ¤í…œ í°íŠ¸ ì¬ë¡œë“œ
fm._get_fontconfig_fonts.cache_clear()
fm.fontManager.__init__()

# í•œê¸€ í°íŠ¸ ì°¾ê¸° ë° ì„¤ì •
korean_fonts = [f.name for f in fm.fontManager.ttflist if 'CJK' in f.name or 'Nanum' in f.name]
if korean_fonts:
    font_name = korean_fonts[0]
    plt.rcParams['font.family'] = font_name
    plt.rcParams['font.sans-serif'] = [font_name] + plt.rcParams['font.sans-serif']
    plt.rcParams['font.monospace'] = [font_name] + plt.rcParams['font.monospace']
    plt.rcParams['font.serif'] = [font_name] + plt.rcParams['font.serif']
else:
    # ëŒ€ì²´ í°íŠ¸ ì„¤ì •
    font_path = '/usr/share/fonts/opentype/noto/NotoSansCJK-Regular.ttc'
    if os.path.exists(font_path):
        prop = fm.FontProperties(fname=font_path)
        font_name = prop.get_name()
        plt.rcParams['font.family'] = font_name
        plt.rcParams['font.sans-serif'] = [font_name] + plt.rcParams['font.sans-serif']

plt.rcParams['axes.unicode_minus'] = False
```

#### 2. ì°¨íŠ¸ í’ˆì§ˆ ì„¤ì •
```python
# ê³ í’ˆì§ˆ ì°¨íŠ¸ ì €ì¥
plt.savefig(chart_path, dpi=300, bbox_inches='tight')
```

### ğŸ“ íŒŒì¼ êµ¬ì¡° í‘œì¤€

#### ìƒˆë¡œìš´ ë…ë¦½ ëª¨ë“ˆ êµ¬ì¡° (ê¶Œì¥)
- ë°±í…ŒìŠ¤íŒ…ë³„ ë…ë¦½ ë””ë ‰í† ë¦¬: `backtests/{ë°±í…ŒìŠ¤íŒ…íƒ€ì…}/`
- Excel íŒŒì¼: `backtests/{ë°±í…ŒìŠ¤íŒ…íƒ€ì…}/results/excel/`
- ì°¨íŠ¸ íŒŒì¼: `backtests/{ë°±í…ŒìŠ¤íŒ…íƒ€ì…}/results/charts/`
- ë³´ê³ ì„œ: `backtests/{ë°±í…ŒìŠ¤íŒ…íƒ€ì…}/results/reports/`
- ì„¤ì • íŒŒì¼: `backtests/{ë°±í…ŒìŠ¤íŒ…íƒ€ì…}/configs/`

#### ê¸°ì¡´ ì¤‘ì•™ ì§‘ì¤‘ì‹ êµ¬ì¡° (ë ˆê±°ì‹œ)
- Excel íŒŒì¼: `results/{ë°±í…ŒìŠ¤íŒ…íƒ€ì…}/` ë””ë ‰í† ë¦¬ì— ì €ì¥
- íŒŒì¼ëª…: `{ë¶„ì„ì¢…ë¥˜}_{ì§€ìˆ˜}_{ì‹œì‘ì¼}_{íƒ€ì„ìŠ¤íƒ¬í”„}` í˜•ì‹ ì‚¬ìš©

### ğŸ”§ ì½”ë“œ í’ˆì§ˆ í‘œì¤€
- ì¤‘ë³µ ì½”ë“œ ë°©ì§€: ë™ì¼í•œ ì•Œê³ ë¦¬ì¦˜ì€ í•˜ë‚˜ì˜ ëª¨ë“ˆì—ì„œ ê´€ë¦¬
- ë©”ì„œë“œ ë„¤ì´ë°: ê¸°ëŠ¥ì„ ëª…í™•íˆ í‘œí˜„í•˜ëŠ” ì´ë¦„ ì‚¬ìš©
- ì—ëŸ¬ ì²˜ë¦¬: try-except ë¸”ë¡ìœ¼ë¡œ ì•ˆì „í•œ ì²˜ë¦¬
- íƒ€ì… íŒíŠ¸: í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ì— íƒ€ì… ëª…ì‹œ

### ğŸš€ ë°±í…ŒìŠ¤íŒ… ì‹¤í–‰ í‘œì¤€
ë°±í…ŒìŠ¤íŒ… ì‹¤í–‰ ì‹œì—ëŠ” **ëŒ€í™”í˜• ì…ë ¥ ë°©ì‹ë³´ë‹¤ í…ŒìŠ¤íŠ¸ ì½”ë“œ ë°©ì‹**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

#### í…ŒìŠ¤íŠ¸ ì½”ë“œ ë°©ì‹ (ê¶Œì¥)
```python
# run_backtest.py íŒŒì¼ì˜ ì„¤ì • ë³€ìˆ˜ ìˆ˜ì •
BACKTEST_CONFIG = {
    'symbol': 'NASDAQ',                    # íˆ¬ì ì§€ìˆ˜
    'start_year': 2020,                    # íˆ¬ì ì‹œì‘ ì—°ë„
    'start_month': 1,                      # íˆ¬ì ì‹œì‘ ì›”
    'investment_period_years': 3,          # íˆ¬ì ê¸°ê°„ (ë…„)
    'dca_months': 24,                      # ì ë¦½ ë¶„í•  ì›”ìˆ˜
}
```

#### ì¥ì 
- **ë°˜ë³µ ì‹¤í–‰ ìš©ì´**: ë™ì¼í•œ ì„¤ì •ìœ¼ë¡œ ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰ ê°€ëŠ¥
- **ì„¤ì • ê´€ë¦¬**: ë³€ìˆ˜ ê°’ë§Œ ìˆ˜ì •í•˜ë©´ ë˜ë¯€ë¡œ ê°„í¸
- **ìë™í™” ê°€ëŠ¥**: ìŠ¤í¬ë¦½íŠ¸ë‚˜ ë°°ì¹˜ ì‹¤í–‰ì— ì í•©
- **ë²„ì „ ê´€ë¦¬**: ì„¤ì • ë³€ê²½ ë‚´ì—­ì„ Gitìœ¼ë¡œ ì¶”ì  ê°€ëŠ¥

#### ì‚¬ìš©ë²•
```bash
# 1. ì„¤ì • ë³€ìˆ˜ ìˆ˜ì •
# 2. ì‹¤í–‰
python run_backtest.py
```

## ìƒì„¸ ë¬¸ì„œ ì°¸ì¡°
ê°œë°œ ì‹œ ì•„ë˜ ë¬¸ì„œë“¤ì„ ë°˜ë“œì‹œ ì°¸ì¡°í•˜ì„¸ìš”:

- **í”„ë¡œì íŠ¸ êµ¬ì¡°**: `docs/project_structure.md` - ë””ë ‰í† ë¦¬ êµ¬ì¡°, ëª¨ë“ˆë³„ ì—­í• , ê¸°ìˆ  ìŠ¤íƒ
- **ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­**: `docs/functional_requirements.md` - í•µì‹¬ ê¸°ëŠ¥, ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤, í™•ì¥ ê³„íš
- **TODO ë¦¬ìŠ¤íŠ¸**: `docs/todo_list.md` - ê°œë°œ ë‹¨ê³„ë³„ í• ì¼, ëª¨ë“ˆë³„ ìƒì„¸ ì‘ì—… í•­ëª©

ê°œë°œ ì‘ì—… ì „ì— í•´ë‹¹ ë¬¸ì„œë“¤ì„ ì½ê³  ìš”êµ¬ì‚¬í•­ì„ íŒŒì•…í•œ í›„ ì§„í–‰í•˜ì„¸ìš”.